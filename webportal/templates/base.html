<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{% block title %}{% endblock title %}</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/reset.css') }}" />
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}" />
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <script>
    (function() {

      const rootStyles = getComputedStyle(document.documentElement);
      const sidebarCollapsedWidth = parseInt(rootStyles.getPropertyValue('--sidebar-width-collapsed')); // 60

      const collapsedKey = 'sidebarCollapsed';
      const widthKey = 'sidebarWidth';
      const collapsedWidth = sidebarCollapsedWidth;  // —à–∏—Ä–∏–Ω–∞ —Å–≤–µ—Ä–Ω—É—Ç–æ–π –ø–∞–Ω–µ–ª–∏ (–ø–∏–∫—Å–µ–ª–µ–π)
      
      // –ß–∏—Ç–∞–µ–º —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ localStorage
      const isCollapsedSaved = localStorage.getItem(collapsedKey) === 'true';
      const savedWidth = parseInt(localStorage.getItem(widthKey));
      
      // –ï—Å–ª–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —à–∏—Ä–∏–Ω–∞ –∏ –æ–Ω–∞ –≤–∞–ª–∏–¥–Ω–∞, –ø—Ä–∏–º–µ–Ω—è–µ–º –µ–µ, –∏–Ω–∞—á–µ –∏—Å–ø–æ–ª—å–∑—É–µ–º –∑–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
      if (!isNaN(savedWidth) && savedWidth) {
        // –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º CSS-–ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —à–∏—Ä–∏–Ω—ã –ø–∞–Ω–µ–ª–∏ –∏ –æ—Ç—Å—Ç—É–ø–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
        document.documentElement.style.setProperty('--sidebar-width', savedWidth + 'px');
        document.documentElement.style.setProperty('--sidebar-margin', (savedWidth + 5) + 'px');
      }
      // –ï—Å–ª–∏ –ø–∞–Ω–µ–ª—å –±—ã–ª–∞ —Å–≤–µ—Ä–Ω—É—Ç–∞ –≤ –ø—Ä–æ—à–ª—ã–π —Ä–∞–∑ ‚Äì —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
      if (isCollapsedSaved) {
        document.documentElement.style.setProperty('--sidebar-width', collapsedWidth + 'px');
        document.documentElement.style.setProperty('--sidebar-margin', (collapsedWidth + 5) + 'px');
        // –î–æ–±–∞–≤–ª—è–µ–º –∫–ª–∞—Å—Å –¥–ª—è —Å–≤–µ—Ä–Ω—É—Ç–æ–≥–æ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–æ –æ—Ç—Ä–∏—Å–æ–≤–∫–∏ —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ
        document.documentElement.classList.add('sidebar-collapsed');
      }
    })();
  </script>
  <script src="{{ url_for('static', filename='js/resizer.js') }}" defer></script>
</head>
<body>
  <aside id="sidebar">
    <div class="logo"><span class="icon">üìò</span><span class="label">DocSpace</span></div>
    <div class="button-panel">
      <a href="/" class="nav-btn">
        <span class="icon">üè†</span>
        <span class="label">–î–æ–º–æ–π</span>
      </a>
      <a href="/search" class="nav-btn">
        <span class="icon">üîç</span>
        <span class="label">–ü–æ–∏—Å–∫</span>
      </a>
      <a href="/history" class="nav-btn">
        <span class="icon">üïò</span>
        <span class="label">–ò—Å—Ç–æ—Ä–∏—è</span>
      </a>
    </div>
    <div class="sidebar-nav">
     {% include "sidebar.html" %}
    </div>
  </aside>
  <div id="resizer">
    <button id="toggle-sidebar" title="–°–≤–µ—Ä–Ω—É—Ç—å –ø–∞–Ω–µ–ª—å">‚è¥</button>
  </div>
  <main id="main">
    <div class="topbar">
      <div class="path">{% include "breadcrumbs.html" %}</div>
      <div class="actions">
        <!--    
        <button>üîó –°—Å—ã–ª–∫–∞</button>
        <button>‚≠ê –í –∏–∑–±—Ä–∞–Ω–Ω–æ–µ</button>
        <button>‚ãØ</button> 
        -->
      </div>
    </div>
    <div class="content">
      <h1>{% block page_name %}{% endblock page_name %}</h1>
      <p>{% block content %}{% endblock content %}</p>
      <!-- Dynamic content is here -->
    </div>
  </main>

  <footer>
    <p>DocUI v2.1 ‚Ä¢ <a href="#">GitHub</a></p>
  </footer>

</body>
</html>